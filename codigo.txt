<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>.:DIVISION ANALISIS DE PATRONES DELLICTUALES:.</title>

    <link rel="icon" type="image/png" href="image/subjefatura-sinfondo.jpg">


    <link rel="stylesheet" href="css/estilo.css"/>
    <link rel="stylesheet" href="css/bootstrap-grid.min.css">
    <link rel="stylesheet" href="css/bootstrap-grid.rtl.min.css">  
    <link rel="stylesheet" href="css/bootstrap-reboot.min.css">    
    <link rel="stylesheet" href="css/bootstrap-reboot.rtl.min.css"> 
    <link rel="stylesheet" href="css/bootstrap-utilities.min.css">
    <link rel="stylesheet" href="css/bootstrap-utilities.rtl.min.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/bootstrap.rtl.min.css">

</head>
<body>
    <div class="container-fluid">
     <div class="text-center fs-1 fw-bold">  
      <p>División Apoyo y Seguimiento</p> 
     </div> 
    </div>
    
    <div class="container">
    <div class="texto">
        <span class="h5">En esta web usted podrá visualizar todos aquellos hechos delictivos por <mark>ROBO</mark> y <mark>HURTO</mark> que hubieran sido ESCLARECIDOS, producto de tareas investigativas, diligencias judiciales, allanamientos o cualquier otra modalidad que NO sea “Hecho Flagrante” durante el periodo comprendido <u>desde el 01 de enero al 31 de marzo</u> del corriente año de la Superintendencia de Seguridad Comunal, la Superintendencia de Investigaciones y la Superintendencia de Lucha contra el Cibercrimen.</span><br><br>
    </div>
    <div>
        <span class="h5">Asimismo, podrá consultar sobre los detenidos que han tenido las Divisiones subordinadas de estas Superintendencias.</span>
    </div>
    </div>
    <br>
    <hr class="border border-primary border-3 opacity-75">


    <!-- INICIO DEL MODULO DE LA SUPERINTENDENCIA DE SEGURIDAD COMUNITARIA -->
<div class="padding_ssc">       
    <p class="h4"><u>Superintendencia de Seguridad Comunal</u></p>
</div>

<div class="">     
    <div class="padding_ssc">
        <div class="borde_ssc">  
            
            <div class="row">
                <div class="col">
                    <div class="">
                        <form action="resultadossc.php" method="POST" class="mb-3" target="_blank">
                            <br><br>
                            <div>
                                <button type="submit" style="width: 200px;" class="btn btn-secondary" name="consulta_ssc" value="hechos_esclarecidos_ssc">Hechos Esclarecidos</button>
                                <button type="submit" style="width: 200px;" class="btn btn-primary" name="consulta_ssc" value="detenidos_ssc">Detenidos</button>    
                            </div>
                        </form>
                        <br>

                        <form action="resultado_busqueda_ssc.php" method="POST" target="_blank" id="searchForm">
                            <label for="tipo_busqueda" class="h5">Tipo de Búsqueda:</label>
                                <select name="tipo_busqueda" id="tipo_busqueda" class="h5" style="width: 233px;">
                                <option value="" class="h5">Seleccione...</option>
                                <option value="hechos_esclarecidos" class="h5">Hechos Esclarecidos</option>
                                <option value="detenidos" class="h5">Detenidos</option>
                                </select>

                                <div id="hechos_esclarecidos_select" style="display: none;">
                                    <label for="hechos_busqueda" class="h5">Buscar por:</label>
                                    <select name="hechos_busqueda" id="hechos_busqueda" class="h5" style="width: 298px;">
                                    <option value="n_sumario" class="h5">Número de Sumario</option>
                                    <option value="dep_instructora" class="h5">Dependencia Instructora</option>
                                    </select>
                                </div>

                                <div id="detenidos_select" style="display: none;">
                                    <label for="detenidos_busqueda" class="h5">Buscar por:</label>
                                    <select name="detenidos_busqueda" id="detenidos_busqueda" class="h5" style="width: 298px;">
                                    <option value="n_sumario" class="h5">Número de Sumario</option>
                                    <option value="apellido" class="h5">Apellido</option>
                                    <option value="nombre"class="h5">Nombre</option>
                                    </select>
                                </div>
                                <br>

                            <label for="termino_busqueda" class="h5">Búsqueda:</label>
                            <input type="text" name="termino_busqueda" id="termino_busqueda" class="h5" placeholder="Ingrese su búsqueda" style="width: 307px"><br>

                        <button type="submit" class="h5">Buscar</button>
                        </form>
                </div>
            </div>

            <div class="col">
                <div class="texto" style="padding-top: 10px;">
                        <p>Al oprimir los botones <u>“Mostrar todos los Hechos Esclarecidos”</u> o <u>“Mostrar Todos los Detenidos”</u> esta información se abrirá en una pestaña nueva, para no impedir la navegación.</p> 
                        <p>También se pueden utilizar los Filtros Automáticos, los cuales reaccionan dependiendo de lo que se quiera consultar en “Tipo de Búsqueda”.</p>
                        <p>Si selecciona Hechos Esclarecidos, las opciones de búsqueda que se desplegarán serán: Número de Sumario o Dependencia Instructora.</p>
                        <p>Si selecciona Detenidos, las opciones de búsqueda que se desplegarán serán: Número Sumario, Apellido y Nombre, y estos resultados se mostrarán en una nueva pestaña, para continuar con las búsquedas que crea necesarias.</p>
                    </div>
                </div>
            </div>

<script>
    document.getElementById('tipo_busqueda').addEventListener('change', function() {
        var tipoBusqueda = this.value;
        var hechosSelect = document.getElementById('hechos_esclarecidos_select');
        var detenidosSelect = document.getElementById('detenidos_select');

        // Ocultar ambos selects
        hechosSelect.style.display = 'none';
        detenidosSelect.style.display = 'none';

        // Mostrar el select correspondiente según la opción elegida
        if (tipoBusqueda === 'hechos_esclarecidos') {
            hechosSelect.style.display = 'block';
        } else if (tipoBusqueda === 'detenidos') {
            detenidosSelect.style.display = 'block';
        }
    });
</script>
        </div>
    </div>
</div>

        
<!-- FIN DEL MODULO DE LA SUPERINTENDENCIA DE SEGURIDAD COMUNITARIA-->


<hr class="border border-primary border-3 opacity-75">


<!-- INICIO DEL MODULO DE LA SUPERINTENDENCIA DE INVESTIGACIONES -->

<div class="padding_ssc">       
    <p class="h4"><u>Superintendencia de Investigaciones</u></p>
</div>

<div>
    <div class="padding_ssc">
        <div class="borde_ssc">
            <div class="row">
                <div class="col">
                    <form action="resultadosii.php" method="POST" class="mb-3" target="_blank">
                            <br><br>
                            <div>
                                <button type="submit" style="width: 200px;" class="btn btn-secondary" name="consulta_sii" value="hechos_esclarecidos_sii">Hechos Esclarecidos</button>
                                <button type="submit" style="width: 200px;" class="btn btn-primary" name="consulta_sii" value="detenidos_sii">Detenidos</button>    
                            </div>
                        </form>
                        <br>
                    <div>
                        <form action="resultado_busqueda_sii.php" method="post" target="_blank" id="searchForm">
                            <div class="h5" style="width:450px">
                                <label for="tipo_busqueda_sii">Tipo de Búsqueda:</label>
                                    <select name="tipo_busqueda_sii" id="tipo_busqueda_sii">
                                    <option value="">Seleccione...</option>
                                    <option value="hechos_esclarecidos_sii">Hechos Esclarecidos</option>
                                    <option value="detenidos_sii">Detenidos</option>
                                    </select>
                            </div>

                            <div id="hechos_esclarecidos_sii_select" class="h5" style="display: none;">
                                <label for="hechos_busqueda_sii">Buscar por:</label>
                                <select name="hechos_busqueda_sii" id="hechos_busqueda_sii">
                                <option value="n_sumario">Número de Sumario</option>
                                <option value="dep_instructora">Dependencia Instructora</option>
                                </select>
                            </div>

                            <div id="detenidos_sii_select" class="h5" style="display: none;">
                                <label for="detenidos_busqueda_sii">Buscar por:</label>
                                <select name="detenidos_busqueda_sii" id="detenidos_busqueda_sii">
                                <option value="dni">DNI</option>
                                <option value="apellido">Apellido</option>
                                <option value="nombre">Nombre</option>
                                </select>
                            </div>

                            <div class="h5">
                                <label for="termino_busqueda_sii">Término de Búsqueda:</label>
                                <input type="text" name="termino_busqueda_sii" id="termino_busqueda_sii" placeholder="Ingrese su término de búsqueda">
                                <button type="submit">Buscar</button>
                            </div>
                        </form>

                    </div>
                </div>

                <div class="col">
                    <div class="texto" style="padding-top: 10px;">
                        <p>Al oprimir los botones <u>“Mostrar todos los Hechos Esclarecidos”</u> o <u>“Mostrar Todos los Detenidos”</u> esta información se abrirá en una pestaña nueva, para no impedir la navegación.</p> 
                        <p>También se pueden utilizar los Filtros Automáticos, los cuales reaccionan dependiendo de lo que se quiera consultar en “Tipo de Búsqueda”.</p>
                        <p>Si selecciona Hechos Esclarecidos, las opciones de búsqueda que se desplegarán serán: Número de Sumario o Dependencia Instructora.</p>
                        <p>Si selecciona Detenidos, las opciones de búsqueda que se desplegarán serán: Número Sumario, Apellido y Nombre, y estos resultados se mostrarán en una nueva pestaña, para continuar con las búsquedas que crea necesarias.</p>
                    </div>
                </div>
            </div>
<script>
    document.getElementById('tipo_busqueda_sii').addEventListener('change', function() {
        var tipoBusqueda = this.value;
        var hechosSelect = document.getElementById('hechos_esclarecidos_sii_select');
        var detenidosSelect = document.getElementById('detenidos_sii_select');

        // Ocultar ambos selects
        hechosSelect.style.display = 'none';
        detenidosSelect.style.display = 'none';

        // Mostrar el select correspondiente según la opción elegida
        if (tipoBusqueda === 'hechos_esclarecidos_sii') {
            hechosSelect.style.display = 'block';
        } else if (tipoBusqueda === 'detenidos_sii') {
            detenidosSelect.style.display = 'block';
        }
    });
</script>

        </div>
    </div>                
</div>


<!-- FIN DEL MODULO DE LA SUPERINTENDENCIA DE INVESTIGACIONES-->

<hr class="border border-primary border-3 opacity-75">

<!-- INICIO DEL MODULO DE LA SUPERINTENDENCIA DE LUCHA CONTRA EL CIBERCRIMEN -->

<div class="padding_sii">
 <div class="borde_ssi">
            
   <p class="h4"><u>Superintendencia de Lucha contra el Cibercrimen</u></p> <br>

 <form action="" method="POST" class="mb-3">
  <select class="form-select col-md-4" style="width: 350px;" aria-label="Default select example" name="tipo_busqueda">
   <option selected>Seleccione una opción: </option>
   <option value="hecho_esclarecido">Hechos Esclarecidos</option>
   <option value="detenido">Detenidos</option>
   <option value="detenido_sumario">Detenido en los Hechos Esclarecidos</option>
  </select><br>

  <input type="text" class="col-md-4" id="busqueda_scc" name="busqueda_scc" placeholder="Búsqueda">
  <br><br>

 <div>
  <button type="submit" class="btn btn-secondary" name="todos">Todos</button>
  <button type="submit" class="btn btn-primary" name="buscar">Buscar</button>
  <button type="reset" name="limpiar_datos" class="btn btn-info">Limpiar</button>
 </div>
</form>









</div>
</div>




<!-- FIN DEL MODULO DE LA SUPERINTENDENCIA DE LUCHA CONTRA EL CIBERCRIMEN-->
<footer>    
<div class="bg-light py-4">
      <div class="container text-center">
        <p class="text-muted mb-0 py-0">© 2024 Diseñado por la División Apoyo y Seguimiento.</p>
      </div>
    </div>
</footer>

    


    <script src="js/bootstrap.bundle.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/bootstrap.esm.js"></script>
    <script src="js/bootstrap.esm.min.js"></script>
    <script src="js/bootstrap.js"></script>
    <script src="js/bootstrap.min.js"></script>



    


</body>
</html>






























<!-- INICIO DEL MODULO DE LA SUPERINTENDENCIA DE SEGURIDAD COMUNITARIA -->
<div class="padding_ssc">       
    <p class="h4"><u>Superintendencia de Seguridad Comunal</u></p>
</div>

<div class="">     
    <div class="padding_ssc">
        <div class="borde_ssc">  
            
            <div class="row">
                <div class="col">
                    <div class="">
                        <form action="resultadossc.php" method="POST" class="mb-3" target="_blank">
                            <br><br>
                            <div>
                                <button type="submit" style="width: 200px;" class="btn btn-secondary" name="consulta_ssc" value="hechos_esclarecidos_ssc">Hechos Esclarecidos</button>
                                <button type="submit" style="width: 200px;" class="btn btn-primary" name="consulta_ssc" value="detenidos_ssc">Detenidos</button>    
                            </div>
                        </form>
                        <br>

                        <form action="resultado_busqueda_ssc.php" method="POST" target="_blank" id="searchForm">
                            <label for="tipo_busqueda" class="h5">Tipo de Búsqueda:</label>
                                <select name="tipo_busqueda" id="tipo_busqueda" class="h5" style="width: 233px;">
                                <option value="" class="h5">Seleccione...</option>
                                <option value="hechos_esclarecidos" class="h5">Hechos Esclarecidos</option>
                                <option value="detenidos" class="h5">Detenidos</option>
                                </select>

                                <div id="hechos_esclarecidos_select" style="display: none;">
                                    <label for="hechos_busqueda" class="h5">Buscar por:</label>
                                    <select name="hechos_busqueda" id="hechos_busqueda" class="h5" style="width: 298px;">
                                    <option value="n_sumario" class="h5">Número de Sumario</option>
                                    <option value="dep_instructora" class="h5">Dependencia Instructora</option>
                                    </select>
                                </div>

                                <div id="detenidos_select" style="display: none;">
                                    <label for="detenidos_busqueda" class="h5">Buscar por:</label>
                                    <select name="detenidos_busqueda" id="detenidos_busqueda" class="h5" style="width: 298px;">
                                    <option value="n_sumario" class="h5">Número de Sumario</option>
                                    <option value="apellido" class="h5">Apellido</option>
                                    <option value="nombre"class="h5">Nombre</option>
                                    </select>
                                </div>
                                <br>

                            <label for="termino_busqueda" class="h5">Búsqueda:</label>
                            <input type="text" name="termino_busqueda" id="termino_busqueda" class="h5" placeholder="Ingrese su búsqueda" style="width: 307px"><br>

                        <button type="submit" class="h5">Buscar</button>
                        </form>
                </div>
            </div>

            <div class="col">
                <div class="texto" style="padding-top: 10px;">
                        <p>Al oprimir los botones <u>“Mostrar todos los Hechos Esclarecidos”</u> o <u>“Mostrar Todos los Detenidos”</u> esta información se abrirá en una pestaña nueva, para no impedir la navegación.</p> 
                        <p>También se pueden utilizar los Filtros Automáticos, los cuales reaccionan dependiendo de lo que se quiera consultar en “Tipo de Búsqueda”.</p>
                        <p>Si selecciona Hechos Esclarecidos, las opciones de búsqueda que se desplegarán serán: Número de Sumario o Dependencia Instructora.</p>
                        <p>Si selecciona Detenidos, las opciones de búsqueda que se desplegarán serán: Número Sumario, Apellido y Nombre, y estos resultados se mostrarán en una nueva pestaña, para continuar con las búsquedas que crea necesarias.</p>
                    </div>
                </div>
            </div>

<script>
    document.getElementById('tipo_busqueda').addEventListener('change', function() {
        var tipoBusqueda = this.value;
        var hechosSelect = document.getElementById('hechos_esclarecidos_select');
        var detenidosSelect = document.getElementById('detenidos_select');

        // Ocultar ambos selects
        hechosSelect.style.display = 'none';
        detenidosSelect.style.display = 'none';

        // Mostrar el select correspondiente según la opción elegida
        if (tipoBusqueda === 'hechos_esclarecidos') {
            hechosSelect.style.display = 'block';
        } else if (tipoBusqueda === 'detenidos') {
            detenidosSelect.style.display = 'block';
        }
    });
</script>
        </div>
    </div>
</div>

        
<!-- FIN DEL MODULO DE LA SUPERINTENDENCIA DE SEGURIDAD COMUNITARIA-->



<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>


    <link rel="icon" type="image/png" href="image/subjefatura-sinfondo.jpg">


    <link rel="stylesheet" href="css/estilo.css"/>
    <link rel="stylesheet" href="css/bootstrap-grid.min.css">
    <link rel="stylesheet" href="css/bootstrap-grid.rtl.min.css">  
    <link rel="stylesheet" href="css/bootstrap-reboot.min.css">    
    <link rel="stylesheet" href="css/bootstrap-reboot.rtl.min.css"> 
    <link rel="stylesheet" href="css/bootstrap-utilities.min.css">
    <link rel="stylesheet" href="css/bootstrap-utilities.rtl.min.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/bootstrap.rtl.min.css">


</head>
<body>

    <div class="container-fluid">
      <div class="text-center fs-1 fw-bold">  
      <p>División Apoyo y Seguimiento</p> 
     </div> 
    </div>
    <br>
    
<?php
include_once 'conexion.php';

$conexion = new Conexion();
$conn = $conexion->conexionDB();

try {
    if (isset($_POST['tipo_busqueda']) && isset($_POST['termino_busqueda'])) {
        $tipoBusqueda = $_POST['tipo_busqueda'];
        $terminoBusqueda = $_POST['termino_busqueda'];
        $campoBusqueda = '';

        if ($tipoBusqueda === 'hechos_esclarecidos' && isset($_POST['hechos_busqueda'])) {
            $campoBusqueda = $_POST['hechos_busqueda'];
            $sql = "SELECT id, n_sumario, dep_instructora, caratula, magis_interventor, num_sum_relacionado, cant_allanamientos, cant_aut_detenidos FROM provisorio.hechos_esclarecidos_ssc WHERE LOWER($campoBusqueda) LIKE LOWER(:terminoBusqueda)";
        } elseif ($tipoBusqueda === 'detenidos' && isset($_POST['detenidos_busqueda'])) {
            $campoBusqueda = $_POST['detenidos_busqueda'];
            $sql = "SELECT id, apellido, nombre, dni FROM provisorio.detenidos_ssc WHERE LOWER($campoBusqueda) LIKE LOWER(:terminoBusqueda)";
        } else {
            echo "Consulta no válida.";
            exit;
        }

        $stmt = $conn->prepare($sql);
        $stmt->bindValue(':terminoBusqueda', '%' . $terminoBusqueda . '%', PDO::PARAM_STR);
        $stmt->execute();
        $resultados = $stmt->fetchAll(PDO::FETCH_ASSOC);

        // Mostrar resultados en una tabla HTML (similar al ejemplo anterior)
        if (is_array($resultados) && count($resultados) > 0) {
            echo "<div style='padding: 10px;'>";
            echo "<div class='table-responsive'>";
            echo "<table class='table table-bordered table-striped'>";
            echo "<thead class='thead-dark'>";
            echo "<tr>";
            if ($tipoBusqueda === 'hechos_esclarecidos') {
                echo "<th>ID</th>";
                echo "<th>Núm. Sumario</th>";
                echo "<th>Dependencia Instructora</th>";
                echo "<th>Carátula</th>";
                echo "<th>Magistrado Interventor</th>";
                echo "<th>Núm. Sumarios Relacionados</th>";
                echo "<th>Cantidad de Allanamientos</th>";
                echo "<th>Cantidad de Autores</th>";
            } elseif ($tipoBusqueda === 'detenidos') {
                echo "<th>ID</th>";
                echo "<th>Apellido</th>";
                echo "<th>Nombre</th>";
                echo "<th>DNI</th>";
            }
            echo "</tr>";
            echo "</thead>";
            echo "<tbody>";
            foreach ($resultados as $resultado) {
                echo "<tr>";
                if ($tipoBusqueda === 'hechos_esclarecidos') {
                    echo "<td>" . htmlspecialchars($resultado['id']) . "</td>";
                    echo "<td>" . htmlspecialchars($resultado['n_sumario']) . "</td>";
                    echo "<td>" . htmlspecialchars($resultado['dep_instructora']) . "</td>";
                    echo "<td>" . htmlspecialchars($resultado['caratula']) . "</td>";
                    echo "<td>" . htmlspecialchars($resultado['magis_interventor']) . "</td>";
                    echo "<td>" . htmlspecialchars($resultado['num_sum_relacionado']) . "</td>";
                    echo "<td>" . htmlspecialchars($resultado['cant_allanamientos']) . "</td>";
                    echo "<td>" . htmlspecialchars($resultado['cant_aut_detenidos']) . "</td>";
                } elseif ($tipoBusqueda === 'detenidos') {
                    echo "<td>" . htmlspecialchars($resultado['id']) . "</td>";
                    echo "<td>" . htmlspecialchars($resultado['apellido']) . "</td>";
                    echo "<td>" . htmlspecialchars($resultado['nombre']) . "</td>";
                    echo "<td>" . htmlspecialchars($resultado['dni']) . "</td>";
                }
                echo "</tr>";
            }
            echo "</tbody>";
            echo "</table>";
            echo "</div>";
            echo "</div>";
        } else {
            echo "No se encontraron resultados.";
        }
    } else {
        echo "No se recibieron parámetros válidos.";
    }
} catch(PDOException $e) {
    echo "Error al realizar la consulta: " . $e->getMessage();
}
?> 



















































CODIGO DEL FORM DE BUSQUEDA

 <div class="padre">     
     <div class="padding_ssc">
      <div class="borde_ssc">  
            
        <div class="hijo">
            <div class="red">

             <form action="resultadossc.php" method="POST" class="mb-3" target="_blank">
              <br>
              <div>
                <button type="submit" class="btn btn-secondary" name="consulta" value="hechos_esclarecidos_ssc">Mostrar Todos los Hechos Esclarecidos</button>
                <button type="submit" class="btn btn-primary" name="consulta" value="detenidos_ssc">Mostrar Todos los Detenidos</button>    
             </div>
             </form>
             <br>

             <form action="resultado_busqueda.php" method="post" target="_blank" id="searchForm">
             <div class="h5" style="width:450px">
             <label for="tipo_busqueda">Tipo de Búsqueda:</label>
                <select name="tipo_busqueda" id="tipo_busqueda">
                <option value="">Seleccione...</option>
                <option value="hechos_esclarecidos">Hechos Esclarecidos</option>
                <option value="detenidos">Detenidos</option>
                </select>
             </div>

             <div id="hechos_esclarecidos_select" class="h5" style="display: none;">
             <label for="hechos_busqueda">Buscar por:</label>
                <select name="hechos_busqueda" id="hechos_busqueda">
                <option value="n_sumario">Número de Sumario</option>
                <option value="dep_instructora">Dependencia Instructora</option>
                </select>
             </div>

             <div id="detenidos_select" class="h5" style="display: none;">
             <label for="detenidos_busqueda">Buscar por:</label>
             <select name="detenidos_busqueda" id="detenidos_busqueda">
                <option value="n_sumario">Número de Sumario</option>
                <option value="apellido">Apellido</option>
                <option value="nombre">Nombre</option>
            </select>
         </div>
            <div class="h5">
            <label for="termino_busqueda">Término de Búsqueda:</label>
            <input type="text" name="termino_busqueda" id="termino_busqueda" placeholder="Ingrese término de búsqueda">
            
            <button type="submit">Buscar</button>
            </div>
         </form>

         </div>


         <div class="hijo" >
            <div class="yellow">
             <p>texto explicativo</p>
            </div>
         </div>

         <script>
         document.getElementById('tipo_busqueda').addEventListener('change', function() {
         var tipoBusqueda = this.value;
         var hechosSelect = document.getElementById('hechos_esclarecidos_select');
         var detenidosSelect = document.getElementById('detenidos_select');

         // Ocultar ambos selects
         hechosSelect.style.display = 'none';
         detenidosSelect.style.display = 'none';

         // Mostrar el select correspondiente según la opción elegida
          if (tipoBusqueda === 'hechos_esclarecidos') {
            hechosSelect.style.display = 'block';
           } else if (tipoBusqueda === 'detenidos') {
            detenidosSelect.style.display = 'block';
           }
           });
           </script>
        </div>
      </div>
     </div>
    </div>





<?php
include_once 'conexion.php';

$conexion = new Conexion();
$conn = $conexion->conexionDB();

try {
    if (isset($_POST['tipo_busqueda_ssc']) && isset($_POST['hechos_busqueda_ssc'])) {
        $tipoBusqueda = $_POST['tipo_busqueda_ssc'];
        $terminoBusqueda = $_POST['termino_busqueda_ssc'];
        $campoBusqueda = '';

        if ($tipoBusqueda === 'hechos_esclarecidos_ssc' && isset($_POST['hechos_busqueda_ssc'])) {
            $campoBusqueda = $_POST['hechos_busqueda_ssc'];
            $sql = "SELECT id, n_sumario, dep_instructora, caratula, magis_interventor, num_sum_relacionado, cant_allanamientos, cant_aut_detenidos FROM provisorio.hechos_esclarecidos_ssc WHERE LOWER($campoBusqueda) LIKE LOWER(:terminoBusqueda)";
        } elseif ($tipoBusqueda === 'detenidos_ssc' && isset($_POST['detenidos_busqueda_ssc'])) {
            $campoBusqueda = $_POST['detenidos_busqueda_ssc'];
            $sql = "SELECT id, apellido, nombre, dni, genero FROM provisorio.detenidos_ssc WHERE LOWER($campoBusqueda) LIKE LOWER(:terminoBusqueda)";
        } else {
            echo "Consulta no válida.";
            exit;
        }

        $stmt = $conn->prepare($sql);
        $stmt->bindValue(':termino_busqueda_ssc', '%' . $terminoBusqueda . '%', PDO::PARAM_STR);
        $stmt->execute();
        $resultados = $stmt->fetchAll(PDO::FETCH_ASSOC);

        // Mostrar resultados en una tabla HTML (similar al ejemplo anterior)
        if (is_array($resultados) && count($resultados) > 0) {
            echo "<div style='padding: 10px;'>";
            echo "<div class='table-responsive'>";
            echo "<table class='table table-bordered table-striped'>";
            echo "<thead class='thead-dark'>";
            echo "<tr>";
            if ($tipoBusqueda === 'hechos_esclarecidos') {
                echo "<th>ID</th>";
                echo "<th>Núm. Sumario</th>";
                echo "<th>Dependencia Instructora</th>";
                echo "<th>Carátula</th>";
                echo "<th>Magistrado Interventor</th>";
                echo "<th>Núm. Sumarios Relacionados</th>";
                echo "<th>Cantidad de Allanamientos</th>";
                echo "<th>Cantidad de Autores</th>";
            } elseif ($tipoBusqueda === 'detenidos') {
                echo "<th>ID</th>";
                echo "<th>Apellido</th>";
                echo "<th>Nombre</th>";
                echo "<th>DNI</th>";
                echo "<th>Genero</th>";
            }
            echo "</tr>";
            echo "</thead>";
            echo "<tbody>";
            foreach ($resultados as $resultado) {
                echo "<tr>";
                if ($tipoBusqueda === 'hechos_esclarecidos') {
                    echo "<td>" . htmlspecialchars($resultado['id']) . "</td>";
                    echo "<td>" . htmlspecialchars($resultado['n_sumario']) . "</td>";
                    echo "<td>" . htmlspecialchars($resultado['dep_instructora']) . "</td>";
                    echo "<td>" . htmlspecialchars($resultado['caratula']) . "</td>";
                    echo "<td>" . htmlspecialchars($resultado['magis_interventor']) . "</td>";
                    echo "<td>" . htmlspecialchars($resultado['num_sum_relacionado']) . "</td>";
                    echo "<td>" . htmlspecialchars($resultado['cant_allanamientos']) . "</td>";
                    echo "<td>" . htmlspecialchars($resultado['cant_aut_detenidos']) . "</td>";
                } elseif ($tipoBusqueda === 'detenidos') {
                    echo "<td>" . htmlspecialchars($resultado['id']) . "</td>";
                    echo "<td>" . htmlspecialchars($resultado['apellido']) . "</td>";
                    echo "<td>" . htmlspecialchars($resultado['nombre']) . "</td>";
                    echo "<td>" . htmlspecialchars($resultado['dni']) . "</td>";
                    echo "<td>" . htmlspecialchars($resultado['genero']) . "</td>";
                }
                echo "</tr>";
            }
            echo "</tbody>";
            echo "</table>";
            echo "</div>";
            echo "</div>";
        } else {
            echo "No se encontraron resultados.";
        }
    } else {
        echo "No se recibieron parámetros válidos.";
    }
} catch(PDOException $e) {
    echo "Error al realizar la consulta: " . $e->getMessage();
}
?>

































  <button type="reset" name="limpiar_datos" class="btn btn-info">Limpiar</button>



<script> // limpiar tabla de busqueda de palabras
    // Función para limpiar la tabla de resultados
    function limpiarResultados() {
        // Seleccionar la tabla de resultados por su clase
        var tablaResultados = document.querySelector('.table-responsive');

        // Verificar si se encontró la tabla
        if (tablaResultados) {
            // Eliminar el contenido de la tabla
            tablaResultados.innerHTML = "<p></p>";
        } else {
            console.error('No se encontró la tabla de resultados.');
        }
    }

    // Esperar a que el documento HTML esté completamente cargado
    document.addEventListener('DOMContentLoaded', function() {
        // Obtener el botón de limpiar por su nombre
        var botonLimpiar = document.querySelector('button[name="limpiar_datos"]');

        // Verificar si se encontró el botón de limpiar
        if (botonLimpiar) {
            // Agregar un evento de clic al botón de limpiar
            botonLimpiar.addEventListener('click', limpiarResultados);
        } else {
            console.error('No se encontró el botón de limpiar.');
        }
    });
</script>









<script>
            // Función para cambiar las opciones del tipo de búsqueda según la selección
            document.getElementById('tipo_busqueda').addEventListener('change', function() {
            var tipoBusqueda = this.value;
            var selectBusqueda = document.getElementById('busqueda');

            // Limpiar opciones anteriores
            while (selectBusqueda.firstChild) {
            selectBusqueda.removeChild(selectBusqueda.firstChild);
            }

            // Agregar nuevas opciones según el tipo de búsqueda seleccionado
            if (tipoBusqueda === 'hechos_esclarecidos') {
            var options = [
                { value: 'n_sumario', text: 'Número de Sumario' },
                { value: 'dep_instructora', text: 'Dependencia Instructora' }
            ];
            } else if (tipoBusqueda === 'detenidos') {
            var options = [
                { value: 'n_sumario', text: 'Núm. Sumario' },
                { value: 'apellido', text: 'Apellido' },
                { value: 'nombre', text: 'Nombre' },
                { value: 'dni', text: 'DNI' },
                { value: 'causa', text: 'Causa' },
                { value: 'domicilio', text: 'Domicilio' }
            ];
            }

            // Agregar las nuevas opciones al select
            options.forEach(function(option) {
            var newOption = document.createElement('option');
            newOption.value = option.value;
            newOption.text = option.text;
            selectBusqueda.appendChild(newOption);
            });
        });
</script>

























<?php
include_once 'conexion.php';

if (isset($_POST['todos'])) {
    $conexion = new Conexion();
    $conn = $conexion->conexionDB();

    try {
        // Consulta SQL para seleccionar todos los registros de HechosEsclarecidosSSC
        $sql = "SELECT n_sumario, dep_instructora, caratula, magistrado_interventor, num_sumarios_relacionados, cantidad_allanamientos, cntidad_autores_detenidos FROM public.hechos_esclarecidos_ssc";

        $stmt = $conn->prepare($sql);
        $stmt->execute();
        $resultados = $stmt->fetchAll(PDO::FETCH_ASSOC);

        if (is_array($resultados) && count($resultados) > 0) {
            echo "<div class='table-responsive'>";
            echo "<table class='table table-bordered table-striped'>";
            echo "<thead class='thead-dark'>";
            echo "<tr>";
            echo "<th>Núm. Sumario</th>";
            echo "<th>Dependencia Instructora</th>";
            echo "<th>Carátula</th>";
            echo "<th>Magistrado Interventor</th>";
            echo "<th>Núm. Sumarios Relacionados</th>";
            echo "<th>Cantidad de Allanamientos</th>";
            echo "<th>Cantidad de Autores</th>";
            echo "</tr>";
            echo "</thead>";
            echo "<tbody>";
            foreach ($resultados as $resultado) {
                echo "<tr>";
                echo "<td>" . $resultado['n_sumario'] . "</td>";
                echo "<td>" . $resultado['dep_instructora'] . "</td>";
                echo "<td>" . $resultado['caratula'] . "</td>";
                echo "<td>" . $resultado['magistrado_interventor'] . "</td>";
                echo "<td>" . $resultado['num_sumarios_relacionados'] . "</td>";
                echo "<td>" . $resultado['cantidad_allanamientos'] . "</td>";
                echo "<td>" . $resultado['cntidad_autores_detenidos'] . "</td>";
                echo "</tr>";
            }
            echo "</tbody>";
            echo "</table>";
            echo "</div>";
        } else {
            echo "No se encontraron resultados.";
        }
    } catch(PDOException $e) {
        echo "Error al realizar la consulta: " . $e->getMessage();
    }
}
?>



























<form action="" method="POST" class="mb-3">
          <input type="text" class="col-md-4" id="busqueda_scc" name="busqueda_scc" placeholder="Busqueda">
          <br><br>

          <div>
            <button type="button" class="btn btn-primary">Ver Todos</button>
            <button type="button" class="btn btn-success">Success</button>
            <button type="button" class="btn btn-info">Limpiar</button>
          </div>


          <?php
            include_once 'conexion.php'; //conecto con la base de datos

           // Inicializar la variable $sql
           $sql = "";

           // Verificar si se ha enviado el formulario
            if (isset($_POST['tipo_busqueda']) && isset($_POST['busqueda'])) {
    $tipo_busqueda = $_POST['tipo_busqueda'];
    $termino_busqueda = strtolower($_POST['busqueda']);


    
    // Incluir la clase de conexión a la base de datos
    $conexion = new Conexion();
    $conn = $conexion->conexionDB();

    try {
        // Consulta SQL para buscar en función del tipo de búsqueda
        if ($tipo_busqueda === 'sumario') {
            $sql = "SELECT * FROM public.delitos WHERE LOWER(sumario) = LOWER(:busqueda)";
        } else if ($tipo_busqueda === 'delito') {
            $sql = "SELECT * FROM public.delitos WHERE LOWER(delito) = LOWER(:busqueda)";
        }

        // Preparar la consulta
        $stmt = $conn->prepare($sql);

        // Bind de parámetros
        $stmt->bindParam(':busqueda', $termino_busqueda);

        // Ejecutar la consulta
        $stmt->execute();

        // Obtener los resultados de la consulta
        $resultados = $stmt->fetchAll(PDO::FETCH_ASSOC);

        // Mostrar los resultados en una tabla responsiva
        if(is_array($resultados) && count($resultados) > 0) {
            echo "<div class='table-responsive' >";
            echo "<table id='tabla_busqueda_delitos' class='table table-bordered table-striped'>";
            echo "<thead class='thead-dark'>";
            echo "<tr>";
            echo "<th>Núm. Sumario</th>";
            echo "<th>Año</th>";
            echo "<th>Fecha</th>";
            echo "<th>Delito</th>";
            echo "<th>Modalidad</th>";
            echo "<th>Comisaria</th>";
            echo "<th>Lugar del Hecho</th>";
            echo "<th>Hora</th>";
            echo "</tr>";
            echo "</thead>";
            echo "<tbody>";
            foreach ($resultados as $resultado) {
                echo "<tr>";
                echo "<td>" . $resultado['sumario'] . "</td>";
                echo "<td>" . $resultado['anio'] . "</td>";
                echo "<td>" . $resultado['fecha_hasta'] . "</td>";
                echo "<td>" . $resultado['delito'] . "</td>";
                echo "<td>" . $resultado['modalidad'] . "</td>";
                echo "<td>" . $resultado['comisaria_hecho'] . "</td>";
                echo "<td>" . $resultado['tipo_lugar_hecho'] . "</td>";
                echo "<td>" . $resultado['hora'] . "</td>";
                echo "</tr>";
            }
            echo "</tbody>";
            echo "</table>";
            echo "</div>";
            echo "<script>";


            echo "document.addEventListener('DOMContentLoaded', function() {";
            echo "  const busqueda_delito = document.getElementById('tabla_busqueda_delitos');";
            echo "  if (busqueda_delito) {";
            echo "    busqueda_delito.scrollIntoView({ behavior: 'smooth' });"; // Desplazar suavemente hacia la tabla
            echo "  }";
            echo "});";
            echo "</script>";




        } else {
            echo " $termino_busqueda";
        }
    } catch(PDOException $e) {
        echo "Error al realizar la búsqueda: " . $e->getMessage();
    }
}
?>







         </form>